<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>工具推荐：帮助检查Python项目Dependencies问题 | 野生栗子🌰</title><meta name=keywords content="Python,tools"><meta name=description content="工作的陈年老项目的requirements.txt超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package& dependency management 工具， 比如poetry和PDM。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。
开始检查前的注意事项： Python版本会有影响。 pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。 没有完美自动化解决的工具，都需要不同程度的手动查看。 pip install -r requirements.txt 后pip freeze显示的，大概率会跟requirements.txt 不一样，因为可能会额外下载dependency package。 想知道冲突在哪个package的哪个dependency: pipdeptree 直接引用项目介绍：
pipdeptree is a command line utility for displaying the installed python packages in form of a dependency tree. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort."><meta name=author content="栗子"><link rel=canonical href=https://qilinz.github.io/posts/python-dependency-check/><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><link rel=icon href=https://qilinz.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://qilinz.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://qilinz.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://qilinz.github.io/apple-touch-icon.png><link rel=mask-icon href=https://qilinz.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-MMQX3JZ66W"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MMQX3JZ66W",{anonymize_ip:!1})}</script><meta property="og:title" content="工具推荐：帮助检查Python项目Dependencies问题"><meta property="og:description" content="工作的陈年老项目的requirements.txt超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package& dependency management 工具， 比如poetry和PDM。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。
开始检查前的注意事项： Python版本会有影响。 pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。 没有完美自动化解决的工具，都需要不同程度的手动查看。 pip install -r requirements.txt 后pip freeze显示的，大概率会跟requirements.txt 不一样，因为可能会额外下载dependency package。 想知道冲突在哪个package的哪个dependency: pipdeptree 直接引用项目介绍：
pipdeptree is a command line utility for displaying the installed python packages in form of a dependency tree. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort."><meta property="og:type" content="article"><meta property="og:url" content="https://qilinz.github.io/posts/python-dependency-check/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-01T13:29:30+02:00"><meta property="article:modified_time" content="2023-06-01T13:29:30+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="工具推荐：帮助检查Python项目Dependencies问题"><meta name=twitter:description content="工作的陈年老项目的requirements.txt超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package& dependency management 工具， 比如poetry和PDM。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。
开始检查前的注意事项： Python版本会有影响。 pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。 没有完美自动化解决的工具，都需要不同程度的手动查看。 pip install -r requirements.txt 后pip freeze显示的，大概率会跟requirements.txt 不一样，因为可能会额外下载dependency package。 想知道冲突在哪个package的哪个dependency: pipdeptree 直接引用项目介绍：
pipdeptree is a command line utility for displaying the installed python packages in form of a dependency tree. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://qilinz.github.io/posts/"},{"@type":"ListItem","position":2,"name":"工具推荐：帮助检查Python项目Dependencies问题","item":"https://qilinz.github.io/posts/python-dependency-check/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"工具推荐：帮助检查Python项目Dependencies问题","name":"工具推荐：帮助检查Python项目Dependencies问题","description":"工作的陈年老项目的requirements.txt超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package\u0026amp; dependency management 工具， 比如poetry和PDM。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。\n开始检查前的注意事项： Python版本会有影响。 pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。 没有完美自动化解决的工具，都需要不同程度的手动查看。 pip install -r requirements.txt 后pip freeze显示的，大概率会跟requirements.txt 不一样，因为可能会额外下载dependency package。 想知道冲突在哪个package的哪个dependency: pipdeptree 直接引用项目介绍：\npipdeptree is a command line utility for displaying the installed python packages in form of a dependency tree. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort.","keywords":["Python","tools"],"articleBody":"工作的陈年老项目的requirements.txt超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package\u0026 dependency management 工具， 比如poetry和PDM。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。\n开始检查前的注意事项： Python版本会有影响。 pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。 没有完美自动化解决的工具，都需要不同程度的手动查看。 pip install -r requirements.txt 后pip freeze显示的，大概率会跟requirements.txt 不一样，因为可能会额外下载dependency package。 想知道冲突在哪个package的哪个dependency: pipdeptree 直接引用项目介绍：\npipdeptree is a command line utility for displaying the installed python packages in form of a dependency tree. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort. It’s also tedious to resolve conflicting dependencies that could have been installed because older version of pip didn’t have true dependency resolution. pipdeptree can help here by identifying conflicting dependencies installed in the environment.\npipdeptree主要用在解决dependency问题，可以用树的方式展示，也会总结现有冲突。按照总结的冲突就比较容易找到最合适的version。\n安装：\npip install pipdeptree 显示所有package的dependencies：\npipdeptree 有冲突的会列在前面的warning部分，后面是完整list\n看一个package的dependencies：\npipdeptree --reverse --packages 存top level package到requirements.txt, 没用过，请参考官方文档。\n不确定requirements.txt是不是有冗余，想根据import生成一个requirements.txt: pipreqs 项目介绍\nGenerate requirements.txt file for any project based on imports\n使用 安装：\npip install pipreqs 生成requirements.txt\npipreqs # 使用其他名字存requirements pipreqs --savepath # 忽略一些文件夹 pipreqs --ignore 问题 如果有其他的package sever可以用 --pypi-server 来设定，但是只能设定一个。所以我就只能把公司pypi package再手动一个个加入requirements.txt。\n我使用的main packages很少，想通过这些main packages生成一个带有完整dependency的requirements.txt: pip-tools 使用 项目介绍\nA set of command line tools to help you keep your pip-based packages fresh, even when you’ve pinned them.\n安装：\npip install pipreqs 生成requirements.txt：\n创建一个requirements.in 文件，列出主要使用的package\n# requirements.in django 根据requirements.in 生成完整requirements.text\npip-compile requirements.in 生成文档大概长这样：\n# This file is autogenerated by pip-compile with Python 3.10 # by the following command: # # pip-compile requirements.in # asgiref==3.6.0 # via django django==4.1.7 # via -r requirements.in sqlparse==0.4.3 # via django 升级某个package：\npip-compile --upgrade-package django 实践：我如何使用这些工具处理工作中遇到的dependency问题的 创建一个新的环境 使用pipdeptree，查出dependency问题，并把报告发给老板（不用自己再说问题在哪了） 使用pipreqs通过import列出项目使用的所有package 把公司内部package再加进去 使用pip-tools 生成最终的requirements.txt 查看是否列出所有dependency：pip install -r requirements.txt -\u003e pip freeze 把这个列表跟requirements.txt 对比一下，确实一样 其他：过程中一键卸载虚拟环境的package： pip freeze | xargs pip uninstall -y 过程中发现了几个离谱冲突，不理解为啥能过CI pipeline，就去查了CI，发现CI的设置也老得不行，跟现有项目还有冲突。第6个步骤之后发现，我们的项目加dependency大概有一百个package，现有的requirements.txt里既有main package也有一些dependency package。总之就是离谱到想现场整个poetry重新来过，再把CI换新。大概大多数工作就是这么弱智又离谱吧…\n","wordCount":"273","inLanguage":"en","datePublished":"2023-06-01T13:29:30+02:00","dateModified":"2023-06-01T13:29:30+02:00","author":{"@type":"Person","name":"栗子"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://qilinz.github.io/posts/python-dependency-check/"},"publisher":{"@type":"Organization","name":"野生栗子🌰","logo":{"@type":"ImageObject","url":"https://qilinz.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://qilinz.github.io/ accesskey=h title="野生栗子🌰 (Alt + H)">野生栗子🌰</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://qilinz.github.io/archives title=过往文章><span>过往文章</span></a></li><li><a href=https://qilinz.github.io/categories title=分类><span>分类</span></a></li><li><a href=https://qilinz.github.io/tags title=标签><span>标签</span></a></li><li><a href=https://qilinz.github.io/search title=搜索><span>搜索</span></a></li><li><a href=https://qilinz.github.io/about title=关于我><span>关于我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>工具推荐：帮助检查Python项目Dependencies问题</h1><div class=post-meta><span title='2023-06-01 13:29:30 +0200 +0200'>June 1, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;栗子</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%bc%80%e5%a7%8b%e6%a3%80%e6%9f%a5%e5%89%8d%e7%9a%84%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9 aria-label=开始检查前的注意事项：>开始检查前的注意事项：</a></li><li><a href=#%e6%83%b3%e7%9f%a5%e9%81%93%e5%86%b2%e7%aa%81%e5%9c%a8%e5%93%aa%e4%b8%aapackage%e7%9a%84%e5%93%aa%e4%b8%aadependency-pipdeptree aria-label="想知道冲突在哪个package的哪个dependency: pipdeptree">想知道冲突在哪个package的哪个dependency: pipdeptree</a></li><li><a href=#%e4%b8%8d%e7%a1%ae%e5%ae%9arequirementstxt%e6%98%af%e4%b8%8d%e6%98%af%e6%9c%89%e5%86%97%e4%bd%99%e6%83%b3%e6%a0%b9%e6%8d%aeimport%e7%94%9f%e6%88%90%e4%b8%80%e4%b8%aarequirementstxt-pipreqs aria-label="不确定requirements.txt是不是有冗余，想根据import生成一个requirements.txt: pipreqs">不确定requirements.txt是不是有冗余，想根据import生成一个requirements.txt: pipreqs</a><ul><li><a href=#%e4%bd%bf%e7%94%a8 aria-label=使用>使用</a></li><li><a href=#%e9%97%ae%e9%a2%98 aria-label=问题>问题</a></li></ul></li><li><a href=#%e6%88%91%e4%bd%bf%e7%94%a8%e7%9a%84main-packages%e5%be%88%e5%b0%91%e6%83%b3%e9%80%9a%e8%bf%87%e8%bf%99%e4%ba%9bmain-packages%e7%94%9f%e6%88%90%e4%b8%80%e4%b8%aa%e5%b8%a6%e6%9c%89%e5%ae%8c%e6%95%b4dependency%e7%9a%84requirementstxt-pip-tools aria-label="我使用的main packages很少，想通过这些main packages生成一个带有完整dependency的requirements.txt: pip-tools">我使用的main packages很少，想通过这些main packages生成一个带有完整dependency的<code>requirements.txt</code>: pip-tools</a><ul><li><a href=#%e4%bd%bf%e7%94%a8-1 aria-label=使用>使用</a></li></ul></li><li><a href=#%e5%ae%9e%e8%b7%b5%e6%88%91%e5%a6%82%e4%bd%95%e4%bd%bf%e7%94%a8%e8%bf%99%e4%ba%9b%e5%b7%a5%e5%85%b7%e5%a4%84%e7%90%86%e5%b7%a5%e4%bd%9c%e4%b8%ad%e9%81%87%e5%88%b0%e7%9a%84dependency%e9%97%ae%e9%a2%98%e7%9a%84 aria-label=实践：我如何使用这些工具处理工作中遇到的dependency问题的>实践：我如何使用这些工具处理工作中遇到的dependency问题的</a></li></ul></div></details></div><div class=post-content><p>工作的陈年老项目的<code>requirements.txt</code>超级乱，甚至互相冲突，想要更新一下requirements.txt，结果发现并没有想像中的那么简单，尤其是想要自动化这个过程的时候。最好的方法还是使用package& dependency management 工具， 比如<a href=https://python-poetry.org/><strong>poetry</strong></a>和<a href=https://pdm.fming.dev/latest/><strong>PDM</strong></a>。我这次还没机会使用，所以不在本文中讨论。 其实基本都是靠ChatGPT推荐的，问ta比看我写的有用。</p><h2 id=开始检查前的注意事项>开始检查前的注意事项：<a hidden class=anchor aria-hidden=true href=#开始检查前的注意事项>#</a></h2><ol><li>Python版本会有影响。</li><li>pip版本会有影响，不同pip版本里解决dependency冲突的方式会不一样。</li><li>没有完美自动化解决的工具，都需要不同程度的手动查看。</li><li><code>pip install -r requirements.txt </code>后pip freeze显示的，大概率会跟<code>requirements.txt</code> 不一样，因为可能会额外下载dependency package。</li></ol><h2 id=想知道冲突在哪个package的哪个dependency-pipdeptree>想知道冲突在哪个package的哪个dependency: pipdeptree<a hidden class=anchor aria-hidden=true href=#想知道冲突在哪个package的哪个dependency-pipdeptree>#</a></h2><p>直接引用<a href=https://github.com/tox-dev/pipdeptree>项目</a>介绍：</p><blockquote><p>pipdeptree is a command line utility for displaying the installed python packages in form of <strong>a dependency tree</strong>. It works for packages installed globally on a machine as well as in a virtualenv. Since pip freeze shows all dependencies as a flat list, finding out which are the top level packages and which packages do they depend on requires some effort. It&rsquo;s also tedious to resolve conflicting dependencies that could have been installed because older version of pip didn&rsquo;t have true dependency resolution. pipdeptree can help here by identifying conflicting dependencies installed in the environment.</p></blockquote><p><code>pipdeptree</code>主要用在解决dependency问题，可以用树的方式展示，也会总结现有冲突。按照总结的冲突就比较容易找到最合适的version。</p><ol><li><p>安装：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pip install pipdeptree
</code></pre></li><li><p>显示所有package的dependencies：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pipdeptree
</code></pre><p>有冲突的会列在前面的warning部分，后面是完整list</p></li><li><p>看一个package的dependencies：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pipdeptree --reverse --packages &lt;package-name&gt;
</code></pre></li><li><p>存top level package到requirements.txt, 没用过，请参考官方文档。</p></li></ol><h2 id=不确定requirementstxt是不是有冗余想根据import生成一个requirementstxt-pipreqs>不确定requirements.txt是不是有冗余，想根据import生成一个requirements.txt: pipreqs<a hidden class=anchor aria-hidden=true href=#不确定requirementstxt是不是有冗余想根据import生成一个requirementstxt-pipreqs>#</a></h2><p><a href=https://github.com/bndr/pipreqs>项目</a>介绍</p><blockquote><p>Generate requirements.txt file for any project based on imports</p></blockquote><h3 id=使用>使用<a hidden class=anchor aria-hidden=true href=#使用>#</a></h3><ol><li><p>安装：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pip install pipreqs
</code></pre></li><li><p>生成requirements.txt</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pipreqs

# 使用其他名字存requirements
pipreqs --savepath &lt;filename&gt;

# 忽略一些文件夹
pipreqs --ignore &lt;dir1/,dir2/&gt;
</code></pre></li></ol><h3 id=问题>问题<a hidden class=anchor aria-hidden=true href=#问题>#</a></h3><p>如果有其他的package sever可以用 <code>--pypi-server</code> 来设定，但是只能设定一个。所以我就只能把公司pypi package再手动一个个加入<code>requirements.txt</code>。</p><h2 id=我使用的main-packages很少想通过这些main-packages生成一个带有完整dependency的requirementstxt-pip-tools>我使用的main packages很少，想通过这些main packages生成一个带有完整dependency的<code>requirements.txt</code>: pip-tools<a hidden class=anchor aria-hidden=true href=#我使用的main-packages很少想通过这些main-packages生成一个带有完整dependency的requirementstxt-pip-tools>#</a></h2><h3 id=使用-1>使用<a hidden class=anchor aria-hidden=true href=#使用-1>#</a></h3><p><a href=https://github.com/jazzband/pip-tools>项目</a>介绍</p><blockquote><p>A set of command line tools to help you keep your pip-based packages fresh, even when you&rsquo;ve pinned them.</p></blockquote><ol><li><p>安装：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pip install pipreqs
</code></pre></li><li><p>生成requirements.txt：</p><ol><li><p>创建一个<code>requirements.in</code> 文件，列出主要使用的package</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl># requirements.in
</span></span><span class=line><span class=cl>django
</span></span></code></pre></div></li><li><p>根据<code>requirements.in</code> 生成完整<code>requirements.text</code></p><pre tabindex=0><code class=language-commandline data-lang=commandline>pip-compile requirements.in
</code></pre><p>生成文档大概长这样：</p><pre tabindex=0><code class=language-commandline data-lang=commandline># This file is autogenerated by pip-compile with Python 3.10
# by the following command:
#
#    pip-compile requirements.in
#
asgiref==3.6.0
    # via django
django==4.1.7
    # via -r requirements.in
sqlparse==0.4.3
    # via django
</code></pre></li></ol></li><li><p>升级某个package：</p><pre tabindex=0><code class=language-commandline data-lang=commandline>pip-compile --upgrade-package django
</code></pre></li></ol><h2 id=实践我如何使用这些工具处理工作中遇到的dependency问题的>实践：我如何使用这些工具处理工作中遇到的dependency问题的<a hidden class=anchor aria-hidden=true href=#实践我如何使用这些工具处理工作中遇到的dependency问题的>#</a></h2><ol><li>创建一个新的环境</li><li>使用pipdeptree，查出dependency问题，并把报告发给老板（不用自己再说问题在哪了）</li><li>使用pipreqs通过import列出项目使用的所有package</li><li>把公司内部package再加进去</li><li>使用pip-tools 生成最终的<code>requirements.txt</code></li><li>查看是否列出所有dependency：<code>pip install -r requirements.txt</code> -> <code>pip freeze</code> 把这个列表跟<code>requirements.txt</code> 对比一下，确实一样</li><li>其他：过程中一键卸载虚拟环境的package： <code>pip freeze | xargs pip uninstall -y</code></li></ol><p>过程中发现了几个离谱冲突，不理解为啥能过CI pipeline，就去查了CI，发现CI的设置也老得不行，跟现有项目还有冲突。第6个步骤之后发现，我们的项目加dependency大概有一百个package，现有的<code>requirements.txt</code>里既有main package也有一些dependency package。总之就是离谱到想现场整个<code>poetry</code>重新来过，再把CI换新。大概大多数工作就是这么弱智又离谱吧&mldr;</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://qilinz.github.io/tags/python/>Python</a></li><li><a href=https://qilinz.github.io/tags/tools/>tools</a></li></ul><nav class=paginav><a class=next href=https://qilinz.github.io/posts/2022-matters/><span class=title>Next »</span><br></a></nav></footer><head><script src=//cdn.jsdelivr.net/npm/@waline/client></script></head><body><div id=waline></div><script>Waline({el:"#waline",serverURL:"https://waline-prod.vercel.app/",dark:"auto",wordLimit:800,pageSize:15,emoji:["https://cdn.jsdelivr.net/gh/norevi/waline-blobcatemojis@1.0/blobs"]})</script></body></article></main><footer class=footer><span>&copy; 2023 <a href=https://qilinz.github.io/>野生栗子🌰</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>